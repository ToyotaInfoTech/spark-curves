# API

This file was generated by SparkDocGenerator.

## io.github.toyotainfotech.spark.curves.ml.clustering

### KLClustering

| parameter | type | default | description |
| --- | --- | --- | --- |
| checkpoint | Boolean | false |  |
| curveSimilarityFunc | String | continuous_dynamic_time_warping | one of ["continuous_dynamic_time_warping", "continuous_frechet_distance", "continuous_hausdorff_distance"] |
| curveSimplifyFunc | String | polyline_sample_equidistant | one of ["array_sample_index", "polyline_sample_equidistant"] |
| inputCurveAxisFields | Array[String] |  | axis field names if curve column is typed as array of structs |
| inputCurveCol | String | curve | input curve column name typed as array of arrays or array of structs |
| iter | Int |  | number of iterations (>= 1) |
| k | Int |  | number of clusters (>= 2) |
| l | Int |  | number of points in simplified curve (>= 2) |
| outputClusterIndexCol | String | cluster_index | output column name for cluster index |
| outputMatchingCurveCol | String |  | output column name for matching curve (optional) |
| outputSimilarityCol | String | similarity | output column name for curve similarity |
| pointsCenterFunc | String | mean_center | one of ["mean_center", "smallest_circle_center", "smallest_rectangle_center"] |

## io.github.toyotainfotech.spark.curves.sql.functions

### array_consecutive_distinct

array_consecutive_distinct(array) - Returns the array removed consecutive duplicate values from `array`.

#### Arguments:

* array: array

#### Examples:

```
> SELECT array_consecutive_distinct(array('a', 'a', 'a', 'b', 'c', 'c', 'a'))
["a", "b", "c", "a"]
> SELECT array_consecutive_distinct(array())
[]
```

### array_filter_split

array_filter_split(array, func) - Returns the double array split from `array` filtered by `func`.

#### Arguments:

* array: array
* func: function

#### Examples:

```
> SELECT array_filter_split(array(1, 2, -3, -4, 5, 6, 7, -8, 9), a -> a > 0)
[[1, 2], [5, 6, 7], [9]]
> SELECT array_filter_split(array(-1, -2, -3, 4, 5, -6, 7, 8, -9), a -> a > 0)
[[4, 5], [7, 8]]
> SELECT array_filter_split(array(), a -> a > 0)
[]
```

### array_filter_split_without_ends

array_filter_split_without_ends(array, func) - Returns the double array split from `array` filtered by `func`. Sub-arrays containing first or last element are excluded from them.

#### Arguments:

* array: array
* func: function

#### Examples:

```
> SELECT array_filter_split_without_ends(array(1, 2, -3, -4, 5, 6, 7, -8, 9), a -> a > 0)
[[5, 6, 7]]
> SELECT array_filter_split_without_ends(array(-1, -2, -3, 4, 5, -6, 7, 8, -9), a -> a > 0)
[[4, 5], [7, 8]]
> SELECT array_filter_split_without_ends(array(), a -> a > 0)
[]
```

### array_sample_index

array_sample_index(array, n) - Returns the `n`-sized polyline sampled indices of `array`.

#### Arguments:

* array: array
* func: function

#### Examples:

```
> SELECT array_sample_index(array(0, 1, 2, 3, 4, 5, 6, 7), 5)
[0, 2, 4, 5, 7]
> SELECT array_sample_index(array(0, 1, 2), 7)
[0, 0, 1, 1, 1, 2, 2]
> SELECT array_sample_index(array(0, 1, 2), 1)
[0]
> SELECT array_sample_index(array(0, 1, 2), 0)
[]
> SELECT array_sample_index(array(), 7)
[]
```

### array_sort_by

array_sort_by(array, func) - Returns the array sorted from `array` by `func`.

#### Arguments:

* array: array
* func: function

#### Examples:

```
> SELECT array_sort_by(array(5, -3, -1, 2 ,-4), a -> abs(a))
[-1, 2, -3, -4, 5]
> SELECT array_sort_by(array(array('C', 'a'), array('B', 'c'), array('A', 'b')), a -> a[1])
[["C", "a"], ["A", "b"], ["B", "c"]]
> SELECT array_sort_by(array(), a -> a > 0)
[]
```

### array_split

array_split(array, func) - Returns the double array split from `array` by `func`.

#### Arguments:

* array: array
* func: function

#### Examples:

```
> SELECT array_split(array(array(0, 1), array(1, 2), array(2, 4), array(3, 3), array(4, 5), array(5, 0)), (a, b) -> a[1] > b[1])
[[0, 1], [1, 2], [2, 4]], [[3, 3], [4, 5]], [[5, 0]]]
> SELECT array_split(array(), (a, b) -> a > b)
[]
```

### continuous_dynamic_time_warping

continuous_dynamic_time_warping(as, bs) - Returns the continuous dynamic time warping between `as` and `bs`.
* approximate algorithm: greedy matching with the memo from as(i) to interior point between bs(j) and bs(j+1) and vice versa
* point similarity: squared Euclidean distance
* integral weight: sum of two path length rates

#### Arguments:

* as: array\<array\<double\>\>
* bs: array\<array\<double\>\>

#### Examples:

```
> SELECT continuous_dynamic_time_warping(array(array(-1d, 1d), array(0d, 1d), array(0d, 2d), array(1d, 2d), array(2d, 2d), array(3d, 2d), array(3d, 1d), array(4d, 1d)), array(array(-1d, 0d), array(0d, 0d), array(3d, 0d), array(4d, 0d)))
2.722
> SELECT continuous_dynamic_time_warping(array(array(1d, 1d), array(2d, 1d), array(2d, 2d)), array(array(1d, 1d), array(2d, 1d), array(2d, 2d)))
0.0
> SELECT continuous_dynamic_time_warping(array(array(1d, 1d), array(3d, 1d), array(5d, 1d), array(7d, 1d)), array(array(0d, 1d), array(2d, 0d), array(4d, 0d), array(6d, 0d), array(7d, 0d)))
0.881
```

### continuous_dynamic_time_warping_match

continuous_dynamic_time_warping_match(as, bs) - Returns the matching points form `as` to `bs` in calculation of continuous dynamic time warping.
* approximate algorithm: greedy matching with the memo from as(i) to interior point between bs(j) and bs(j+1) and vice versa
* point similarity: squared Euclidean distance
* integral weight: sum of two path length rates

#### Arguments:

* as: array\<array\<double\>\>
* bs: array\<array\<double\>\>

#### Examples:

```
> SELECT continuous_dynamic_time_warping_match(array(array(-1d, 1d), array(0d, 1d), array(0d, 2d), array(1d, 2d), array(2d, 2d), array(3d, 2d), array(3d, 1d), array(4d, 1d)), array(array(-1d, 0d), array(0d, 0d), array(3d, 0d), array(4d, 0d)))
[[-1.0, 0.0], [0.0, 0.0], [0.0, 0.0], [1.0, 0.0], [2.0, 0.0], [3.0, 0.0], [3.0, 0.0], [4.0, 0.0]]
> SELECT continuous_dynamic_time_warping_match(array(array(-1d, 0d), array(0d, 0d), array(3d, 0d), array(4d, 0d)), array(array(-1d, 1d), array(0d, 1d), array(0d, 2d), array(1d, 2d), array(2d, 2d), array(3d, 2d), array(3d, 1d), array(4d, 1d)))
[[-1.0, 1.0], [0.0, 1.0], [3.0, 1.0], [4.0, 1.0]]
> SELECT continuous_dynamic_time_warping_match(array(array(1d, 1d), array(2d, 1d), array(3d, 1d), array(4d, 1d)), array(array(1d, 0d), array(0d, 0d), array(0.5d, 0d), array(2d, 0d), array(2d, -1d), array(2d, 0d), array(3.5d, 0d), array(3.5d, -1d), array(3.5d, 0d), array(4.5d, 0d), array(5d, 0d), array(2d, 0d)))
[[1.0, 0.0], [2.0, 0.0], [3.0, 0.0], [2.0, 0.0]]
> SELECT continuous_dynamic_time_warping_match(array(array(1d, 0d), array(0d, 0d), array(0.5d, 0d), array(2d, 0d), array(2d, -1d), array(2d, 0d), array(3.5d, 0d), array(3.5d, -1d), array(3.5d, 0d), array(4.5d, 0d), array(5d, 0d), array(2d, 0d)), array(array(1d, 1d), array(2d, 1d), array(3d, 1d), array(4d, 1d)))
[[1.0, 1.0], [1.0, 1.0], [1.0, 1.0], [2.0, 1.0], [2.0, 1.0], [2.0, 1.0], [3.5, 1.0], [3.5, 1.0], [3.5, 1.0], [4.0, 1.0], [4.0, 1.0], [4.0, 1.0]]
```

### continuous_frechet_distance

continuous_frechet_distance(as, bs) - Returns the continuous Frechet distance between `as` and `bs`.
* approximate algorithm: greedy matching with the memo from as(i) to interior point between bs(j) and bs(j+1) and vice versa

#### Arguments:

* as: array\<array\<double\>\>
* bs: array\<array\<double\>\>

#### Examples:

```
> SELECT continuous_frechet_distance(array(array(-1d, 1d), array(0d, 1d), array(0d, 2d), array(1d, 2d), array(2d, 2d), array(3d, 2d), array(3d, 1d), array(4d, 1d)), array(array(-1d, 0d), array(0d, 0d), array(3d, 0d), array(4d, 0d)))
2.0
> SELECT continuous_frechet_distance(array(array(1d, 1d), array(2d, 1d), array(2d, 2d)), array(array(1d, 1d), array(2d, 1d), array(2d, 2d)))
0.0
> SELECT continuous_frechet_distance(array(array(1d, 1d), array(3d, 1d), array(5d, 1d), array(7d, 1d)), array(array(0d, 1d), array(2d, 0d), array(4d, 0d), array(6d, 0d), array(7d, 0d)))
1.0
```

### continuous_frechet_distance_match

continuous_frechet_distance_match(as, bs) - Returns the matching points form `as` to `bs` in calculation of continuous Frechet distance.
* approximate algorithm: greedy matching with the memo from as(i) to interior point between bs(j) and bs(j+1) and vice versa

#### Arguments:

* as: array\<array\<double\>\>
* bs: array\<array\<double\>\>

#### Examples:

```
> SELECT continuous_frechet_distance_match(array(array(-1d, 1d), array(0d, 1d), array(0d, 2d), array(1d, 2d), array(2d, 2d), array(3d, 2d), array(3d, 1d), array(4d, 1d)), array(array(-1d, 0d), array(0d, 0d), array(3d, 0d), array(4d, 0d)))
[[-1.0, 0.0], [0.0, 0.0], [0.0, 0.0], [1.0, 0.0], [2.0, 0.0], [3.0, 0.0], [3.0, 0.0], [4.0, 0.0]]
> SELECT continuous_frechet_distance_match(array(array(-1d, 0d), array(0d, 0d), array(3d, 0d), array(4d, 0d)), array(array(-1d, 1d), array(0d, 1d), array(0d, 2d), array(1d, 2d), array(2d, 2d), array(3d, 2d), array(3d, 1d), array(4d, 1d)))
[[-1.0, 1.0], [0.0, 1.0], [3.0, 1.0], [4.0, 1.0]]
> SELECT continuous_frechet_distance_match(array(array(1d, 1d), array(2d, 1d), array(3d, 1d), array(4d, 1d)), array(array(1d, 0d), array(0d, 0d), array(0.5d, 0d), array(2d, 0d), array(2d, -1d), array(2d, 0d), array(3.5d, 0d), array(3.5d, -1d), array(3.5d, 0d), array(4.5d, 0d), array(5, 0d), array(2d, 0d)))
[[1.0, 0.0], [2.0, 0.0], [3.0, 0.0], [2.0, 0.0]]
> SELECT continuous_frechet_distance_match(array(array(1d, 0d), array(0d, 0d), array(0.5d, 0d), array(2d, 0d), array(2d, -1d), array(2d, 0d), array(3.5d, 0d), array(3.5d, -1d), array(3.5d, 0d), array(4.5d, 0d), array(5, 0d), array(2d, 0d)), array(array(1d, 1d), array(2d, 1d), array(3d, 1d), array(4d, 1d)))
[[1.0, 1.0], [1.0, 1.0], [1.0, 1.0], [2.0, 1.0], [2.0, 1.0], [2.0, 1.0], [3.5, 1.0], [3.5, 1.0], [3.5, 1.0], [4.0, 1.0], [4.0, 1.0], [4.0, 1.0]]
```

### continuous_hausdorff_distance

continuous_hausdorff_distance(as, bs) - Returns the continuous Hausdorff distance between `as` and `bs`.

#### Arguments:

* as: array\<array\<double\>\>
* bs: array\<array\<double\>\>

#### Examples:

```
> SELECT continuous_hausdorff_distance(array(array(1d, 0d), array(2d, 0d), array(3d, 0d), array(4d, 0d), array(5d, 0d), array(3d, 0d)), array(array(4d, 0d), array(3d, 2d), array(1d, 1d)))
2.0
```

### continuous_hausdorff_distance_match

continuous_hausdorff_distance_match(as, bs) - Returns the matching points form `as` to `bs` in calculation of continuous Hausdorff distance.

#### Arguments:

* as: array\<array\<double\>\>
* bs: array\<array\<double\>\>

#### Examples:

```
> SELECT continuous_hausdorff_distance_match(array(array(1d, 0d), array(2d, 0d), array(3d, 0d), array(4d, 0d), array(5d, 0d), array(3d, 0d)), array(array(4d, 0d), array(3d, 2d), array(1d, 1d)))
[[1.0, 1.0], [1.4, 1.2], [3.8, 0.4], [4.0, 0.0], [4.0, 0.0], [3.8, 0.4]]
```

### discrete_dynamic_time_warping

discrete_dynamic_time_warping(as, bs) - Returns the discrete dynamic time warping between `as` and `bs`.

#### Arguments:

* as: array\<array\<double\>\>
* bs: array\<array\<double\>\>

#### Examples:

```
> SELECT discrete_dynamic_time_warping(array(array(0d, 0d), array(2d, 0d), array(6d, 0d)), array(array(0d, 1d), array(2d, 1d), array(3d, 1d), array(6d, 1d)))
4.4142
> SELECT discrete_dynamic_time_warping(array(array(1d, 1d), array(2d, 1d), array(2d, 2d)), array(array(1d, 1d), array(2d, 1d), array(2d, 2d), array(2d, 2d)))
0.0
```

### discrete_frechet_distance

discrete_frechet_distance(as, bs) - Returns the discrete Fréchet distance between `as` and `bs`.

#### Arguments:

* as: array\<array\<double\>\>
* bs: array\<array\<double\>\>

#### Examples:

```
> SELECT discrete_frechet_distance(array(array(0d, 0d), array(2d, 0d), array(6d, 0d)), array(array(0d, 1d), array(2d, 1d), array(3d, 1d), array(6d, 1d)))
1.414
> SELECT discrete_frechet_distance(array(array(1d, 1d), array(2d, 1d), array(2d, 2d)), array(array(1d, 1d), array(2d, 1d), array(2d, 2d), array(2d, 2d)))
0.0
```

### discrete_hausdorff_distance

discrete_hausdorff_distance(as, bs) - Returns the discrete Hausdorff distance between `as` and `bs`.

#### Arguments:

* as: array\<array\<double\>\>
* bs: array\<array\<double\>\>

#### Examples:

```
> SELECT discrete_hausdorff_distance(array(array(1d, 0d), array(2d, 0d), array(3d, 0d)), array(array(1d, 1d), array(2d, 2d), array(3d, 3d), array(4d, 4d)))
4.123
> SELECT discrete_hausdorff_distance(array(array(-0.1d, -0.1d), array(0.3d, -0.1d), array(0.3d, 0.4d), array(-0.1d, 0.4d)), array(array(0d, 0d), array(0.1d, 0d), array(0.1d, 0.1d), array(0d, 0.1d)))
0.361
```

### euclidean_distance

euclidean_distance(a, b) - Returns the Euclidean distance between `a` and `b`.

#### Arguments:

* a: array\<double\>
* b: array\<double\>

#### Examples:

```
> SELECT euclidean_distance(array(0.0d, 0.0d), array(0.1d, 0.1d))
0.141
> SELECT euclidean_distance(array(1d, 2d, 3d), array(2d, 4d, 6d))
3.742
```

### levenshtein_distance

levenshtein_distance(a, b) - Returns the Levenshtein distance between `a` and `b`.

#### Arguments:

* a: array
* b: array

#### Examples:

```
> SELECT levenshtein_distance(array('k', 'i', 't', 't', 'e', 'n'), array('k', 'i', 't', 't', 'e', 'n'))
0
> SELECT levenshtein_distance(array('k', 'i', 't', 't', 'e', 'n'), array('s', 'i', 't', 't', 'i', 'n', 'g'))
3
```

### mean_center

mean_center(points) - Returns the mean center of `points`.

#### Arguments:

* points: array\<array\<double\>\>

#### Examples:

```
> SELECT mean_center(array(array(0d, 0d), array(0d, 2d), array(1d, 0d), array(1d, 1d), array(1d, 2d), array(2d, 0d), array(2d, 1d)))
[1, 0.857]
> SELECT mean_center(array(array(3d, -2d), array(3d, 5d), array(-4d, 1d), array(-4d, -2d), array(5d, 1d)))
[0.6, 0.6]
> SELECT mean_center(cast(array() as array<array<double>>))
[]
```

### polyline_length

polyline_length(polyline) - Returns the length of `polyline`.

#### Arguments:

* polyline: array\<array\<double\>\>

#### Examples:

```
> SELECT polyline_length(array(array(0.0d, 0.0d), array(0.1d, 0.2d), array(0.4d, -0.2d)))
0.724
> SELECT polyline_length(array(array(1d, 2d, 3d), array(2d, 4d, 6d)))
3.742
> SELECT polyline_length(cast(array() as array<array<double>>))
0.0
```

### polyline_sample_equidistant

polyline_sample_equidistant(polyline, n) - Returns the `n`-sized polyline sampled equidistantly from `polyline`.

#### Arguments:

* polyline: array\<array\<double\>\>
* n: int

#### Examples:

```
> SELECT polyline_sample_equidistant(array(array(0d, 0d), array(0d, 1d), array(3d, 1d), array(3d, -9d)), 5)
[[0.0, 0.0], [2.5, 1.0], [3.0, -2.0], [3.0, -5.5], [3.0, -9.0]]
> SELECT polyline_sample_equidistant(array(array(1d, 2d), array(1d, 2d)), 4)
[[1.0, 2.0], [1.0, 2.0], [1.0, 2.0], [1.0, 2.0]]
> SELECT polyline_sample_equidistant(array(array(1d, 2d), array(3d, 4d)), 1)
[[1.0, 2.0]]
> SELECT polyline_sample_equidistant(array(array(1d, 2d), array(3d, 4d)), 0)
[]
> SELECT polyline_sample_equidistant(array(array(1d, 2d)), 3)
[[1.0, 2.0], [1.0, 2.0], [1.0, 2.0]]
> SELECT polyline_sample_equidistant(cast(array() as array<array<double>>), 3)
[]
```

### smallest_circle_center

smallest_circle_center(points) - Returns the center of smallest center enclosing `points`.

#### Arguments:

* points: array\<2D array\<double\>\>

#### Examples:

```
> SELECT smallest_circle_center(array(array(0d, 0d), array(0d, 2d), array(2d, 2d), array(2d, 0d)))
[1.0, 1.0]
> SELECT smallest_circle_center(array(array(3d, -2d), array(3d, 5d), array(-4d, 1d), array(-4d, -2d), array(5d, 1d)))
[0.5, 1.5]
> SELECT smallest_circle_center(cast(array() as array<array<double>>))
[]
```

### smallest_rectangle_center

smallest_rectangle_center(points) - Returns the center of smallest rectangle enclosing `points`.

#### Arguments:

* points: array\<array\<double\>\>

#### Examples:

```
> SELECT smallest_rectangle_center(array(array(0d, 0d), array(0d, 2d), array(2d, 2d), array(2d, 0d)))
[1.0, 1.0]
> SELECT smallest_rectangle_center(array(array(3d, -2d), array(3d, 5d), array(-4d, 1d), array(-4d, -2d), array(5d, 1d)))
[0.5, 1.5]
> SELECT smallest_rectangle_center(cast(array() as array<array<double>>))
[]
```

